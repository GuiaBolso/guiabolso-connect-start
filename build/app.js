var n=require("qs").stringify,e=function(n){return/(frame-src|child-src|form-action|frame-ancestors|plugin-types|base-uri)/gim.test(n)},t=function(n){document.addEventListener("securitypolicyviolation",(function(t){var o=null==t?void 0:t.originalPolicy,i=e(o);return n(i)})),fetch(document.location.href).then((function(t){var o=null==t?void 0:t.headers.get("Content-Security-Policy"),i=e(o);return n(i)}))},o=function(){var e="https://connect.guiabolso.com.br",o=function(t){var o=n(t);return"".concat(e,"/#/integracao?").concat(o)},i=function(n){n&&window.open(n,"gbConnectWindow","width=992,height=820")},r=function(){var n=document.querySelector("body");null==n||n.insertAdjacentHTML("beforeend",'<div class="gbc-style">\n        '.concat("\n      <style>\n        @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@600&display=swap');\n\n        #gbc-open {\n          align-items: center;\n          background-color: #250048;\n          border-radius: 0.5rem;\n          border: 0;\n          box-shadow: none;\n          box-sizing: border-box;\n          cursor: pointer;\n          display: inline-flex;\n          justify-content: center;\n          margin: 0;\n          min-height: 3rem;\n          min-width: 312px;\n          outline: 0;\n          padding: 0px 1.5rem;\n          position: relative;\n          user-select: none;\n        }\n\n        #gbc-open .gbc-open__label {\n          pointer-events: none;\n          user-select: none;\n          line-height: 1.75;\n          letter-spacing: 0.02857em;\n          font-size: 1rem;\n          color: #ffffff;\n          box-sizing: border-box;\n          width: 100%;\n          align-items: inherit;\n          justify-content: inherit;\n          display: flex;\n          font-family: 'Open Sans';\n          font-weight: 600;\n          text-transform: none;\n        }\n\n        #gbc-open .gbc-open__icon {\n          user-select: none;\n          width: 20;\n          height: 25;\n          fill: none;\n          box-sizing: border-box;\n          margin-right: 0.625rem;\n        }\n      </style>\n    ","\n      </div>"))},c=function(){var n=document.querySelector("body");null==n||n.insertAdjacentHTML("beforeend",'<div class="gbc-style">\n        '.concat("\n      <style>\n        #gbc-iframe {\n          background: #ffffff;\n          border-radius: 6px;\n          border: 1px solid #f2f2f2;\n          box-shadow: 0px 0px 1px rgba(13, 13, 13, 0.2),\n            0px 2px 2px rgba(13, 13, 13, 0.14);\n        }\n      </style>\n    ","\n      </div>"))},a=function(n){var t,o,i=null==n||null===(t=n.data)||void 0===t?void 0:t.oauthcode;return!(!((null==n?void 0:n.origin)===e)||!i)&&(null==n||null===(o=n.data)||void 0===o?void 0:o.oauthcode)},s=function(){window.addEventListener("message",(function(n){var e=document.querySelector("#gbc-iframe");a(n)&&(null==e||e.remove())}),!1)},d=function(n){var e=n.container,t=n.accessParameters,c=n.buttonConfig,a=void 0===c?{}:c;if(e){r();var s=o(t),d=a.icon,l=void 0===d||d,f=a.label,u=void 0===f?"Conectar com Guiabolso":f,g='\n      <button id="gbc-open" type="button">\n        <span class="gbc-open__label">\n          '.concat(l?'<svg class="gbc-open__icon" width="20" height="25" fill="none"><path d="M19.2094 9.25008L10.9592 12.6876V15.2501L17.2392 12.6876C17.1161 16.6251 13.9145 19.8126 10.0357 19.8126C6.09531 19.8126 2.83218 16.5001 2.83218 12.4376C2.83218 8.37508 6.03374 5.06258 10.0357 5.06258C11.6981 5.06258 12.8063 5.43758 13.9145 6.31258L16.4388 5.25008C15.0228 3.68758 12.7447 2.62508 10.0357 2.62508C4.67923 2.62508 0.307861 7.00008 0.307861 12.4376C0.307861 17.8751 4.67923 22.2501 9.97414 22.2501C15.269 22.2501 19.702 17.8126 19.702 12.4376C19.702 11.3126 19.5788 10.2501 19.2094 9.25008Z" fill="#00C1EB"></path><path d="M19.702 5.12501L10.9592 8.81251V11.375L19.702 7.75001V5.12501Z" fill="#F9386A"></path></svg>':"","\n          ").concat(u,"\n        </span>\n      </button>\n    ");e.innerHTML=g,e.addEventListener("click",(function(n){"gbc-open"===n.target.id&&i(s)}))}},l=function(n){var e=n.container,i=n.accessParameters,r=n.iframeConfig,a=void 0===r?{height:800,width:395}:r;e&&t((function(n){if(n){c();var t=a.height,r=a.width,d=o(i),l='\n          <iframe\n            id="gbc-iframe"\n            frameborder="0"\n            src="'.concat(d,'"\n            height="').concat(t,'"\n            width="').concat(r,'"\n          ></iframe>\n        ');e.innerHTML=l,s()}}))};return{start:function(n){var e=n.accessParameters,o=n.container,i=n.buttonConfig,r=n.iframeConfig,c=n.onSuccess;t((function(n){var t;n?l({container:o,accessParameters:e,iframeConfig:r}):d({container:o,accessParameters:e,buttonConfig:i}),c&&(t=c,window.addEventListener("message",(function(n){var e=a(n);e&&t(e)}),!1))}))},createAccessUrl:o,openPopup:i,addStyleInPage:function(){r(),c()},renderButton:d,renderIframe:l,closeIframeAfterReceiveOAuthcode:s}};exports.gbConnect=o,window.gbConnect=o;