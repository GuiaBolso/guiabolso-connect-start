require("regenerator-runtime/runtime");var n=function(n){return"?".concat(Object.keys(n).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(n[e]))})).join("&"))};function e(n){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}var t=new Map;function o(n){if(t.has(n))return t.get(n)}function r(n,e){t.set(n,e)}function i(){t.forEach((function(n,e){t.delete(e)}))}function c(n,e){if(null==n)return{};var t,o,r=function(n,e){if(null==n)return{};var t,o,r={},i=Object.keys(n);for(o=0;o<i.length;o++)t=i[o],e.indexOf(t)>=0||(r[t]=n[t]);return r}(n,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(o=0;o<i.length;o++)t=i[o],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function a(n){var e,t,i,a=n.window,l=void 0===a?globalThis:a,u=c(n,["window"]),s=(t=(e=u).domain,i=e.onEmmiter,function(n){var e,r=n.origin,c=n.data;if(r===t){var a=null!=c?c:{},l=a.eventName,u=a.payload,s=void 0===u?{}:u;if(l){var d=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};i({payload:s,eventName:l}),n(s)};null===(e=o("observer")[l])||void 0===e||e.forEach(d)}}});return l.addEventListener("message",s,!1),o("observer")||r("observer",{}),{on:function(n,e){o("observer")[n]||(o("observer")[n]=[]),o("observer")[n].push(e)},destroy:function(){l.removeEventListener("message",s),r("observer",void 0)}}}"object"!==("undefined"==typeof globalThis?"undefined":e(globalThis))&&(Object.prototype.__defineGetter__("__alloc__",(function(){return this})),__alloc__.globalThis=__alloc__,delete Object.prototype.__alloc__);function l(n){var e=n.container,t=n.src,o=n.config;if(e){globalThis.document.head.insertAdjacentHTML("beforeend","\n    <style ".concat("data-guiabolso-connect-embedded",">\n      #").concat("guiabolso-connect-embedded"," {\n        background: #ffffff;\n        border-radius: 6px;\n        border: 1px solid #f2f2f2;\n        box-shadow: 0px 0px 1px rgba(13, 13, 13, 0.2),\n          0px 2px 2px rgba(13, 13, 13, 0.14);\n      }\n    </style>\n  "));var r=null!=o?o:{},i=r.height,c=void 0===i?800:i,a=r.width,l=void 0===a?395:a;e.innerHTML='\n        <iframe\n          id="'.concat("guiabolso-connect-embedded",'"\n          frameborder="0"\n          src="').concat(t,'"\n          height="').concat(c,'"\n          width="').concat(l,'"\n        ></iframe>\n      ')}}function u(n){var e=n.container,t=n.onClick,o=n.config;if(e){var r=null!=o?o:{},i=r.allowIcon,c=void 0===i||i,a=r.label,l=void 0===a?"Conectar com Guiabolso":a;globalThis.document.head.insertAdjacentHTML("beforeend","\n        <style ".concat("data-gbc-style-button",">\n          @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@600&display=swap');\n    \n          #gbc-open {\n            align-items: center;\n            background-color: #250048;\n            border-radius: 0.5rem;\n            border: 0;\n            box-shadow: none;\n            box-sizing: border-box;\n            cursor: pointer;\n            display: inline-flex;\n            justify-content: center;\n            margin: 0;\n            min-height: 3rem;\n            min-width: 312px;\n            outline: 0;\n            padding: 0px 1.5rem;\n            position: relative;\n            user-select: none;\n          }\n    \n          #gbc-open .gbc-open__label {\n            pointer-events: none;\n            user-select: none;\n            line-height: 1.75;\n            letter-spacing: 0.02857em;\n            font-size: 1rem;\n            color: #ffffff;\n            box-sizing: border-box;\n            width: 100%;\n            align-items: inherit;\n            justify-content: inherit;\n            display: flex;\n            font-family: 'Open Sans';\n            font-weight: 600;\n            text-transform: none;\n          }\n    \n          #gbc-open .gbc-open__icon {\n            user-select: none;\n            width: 20;\n            height: 25;\n            fill: none;\n            box-sizing: border-box;\n            margin-right: 0.625rem;\n          }\n        </style>\n      "));var u=function(n){var e=n.iconElement,t=n.label;return'\n    <button id="gbc-open" type="button">\n      <span class="gbc-open__label">\n        '.concat(e,"\n        ").concat(t,"\n      </span>\n    </button>\n  ")}({iconElement:c?'\n    <svg \n        class="gbc-open__icon"\n        width="20"\n        height="25"\n        fill="none"\n    >\n        <path \n            d="M19.2094 9.25008L10.9592 12.6876V15.2501L17.2392 12.6876C17.1161 16.6251 13.9145 19.8126 10.0357 19.8126C6.09531 19.8126 2.83218 16.5001 2.83218 12.4376C2.83218 8.37508 6.03374 5.06258 10.0357 5.06258C11.6981 5.06258 12.8063 5.43758 13.9145 6.31258L16.4388 5.25008C15.0228 3.68758 12.7447 2.62508 10.0357 2.62508C4.67923 2.62508 0.307861 7.00008 0.307861 12.4376C0.307861 17.8751 4.67923 22.2501 9.97414 22.2501C15.269 22.2501 19.702 17.8126 19.702 12.4376C19.702 11.3126 19.5788 10.2501 19.2094 9.25008Z" \n            fill="#00C1EB"\n        >\n        </path>\n        <path\n            d="M19.702 5.12501L10.9592 8.81251V11.375L19.702 7.75001V5.12501Z"\n            fill="#F9386A"\n        >\n        </path>\n    </svg>':"",label:l});e.innerHTML=u;var s=globalThis.document.querySelector("#gbc-open");null==s||s.addEventListener("click",t)}}var s=function(n){return{production:"https://connect.guiabolso.com.br",sandbox:"https://connect.guiabolso.com.br"}[n]},d=function(n){return Boolean(/(frame-src|child-src|form-action|frame-ancestors|plugin-types|base-uri)/gim.test(null!=n?n:""))},f=function(){return Promise.race([fetch(document.location.href).then((function(n){return null==n?void 0:n.headers.get("Content-Security-Policy")})),new Promise((function(n){return document.addEventListener("securitypolicyviolation",(function(e){return n(null==e?void 0:e.originalPolicy)}))}))]).then(d)},b=["load","onboard","signup","bank_list","bank_not_found","bank_selected","bank_offline","synced","complete","back","exit","error"];function p(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function g(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?p(Object(t),!0).forEach((function(e){m(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function m(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function v(n,e){if(null==n)return{};var t,o,r=function(n,e){if(null==n)return{};var t,o,r={},i=Object.keys(n);for(o=0;o<i.length;o++)t=i[o],e.indexOf(t)>=0||(r[t]=n[t]);return r}(n,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(o=0;o<i.length;o++)t=i[o],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function y(n,e,t,o,r,i,c){try{var a=n[i](c),l=a.value}catch(n){return void t(n)}a.done?e(l):Promise.resolve(l).then(o,r)}function h(n){return function(){var e=this,t=arguments;return new Promise((function(o,r){var i=n.apply(e,t);function c(n){y(i,o,r,c,a,"next",n)}function a(n){y(i,o,r,c,a,"throw",n)}c(void 0)}))}}function w(n){return O.apply(this,arguments)}function O(){return(O=h(regeneratorRuntime.mark((function e(t){var c,d,p,m,y,h,w,O,x,_,j,k,P,C,L,S,T,E,I,M,R;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.container,d=t.config,p=t.data,m=t.clientId,y=t.userTrackingId,h=t.callbackURL,w=t.fallbackURL,O=void 0===w?"":w,x=t.environment,_=void 0===x?"sandbox":x,"production",j=s("production"),e.next=5,f();case 5:if(e.t0=e.sent,!e.t0){e.next=8;break}e.t0=Boolean(c);case 8:return k=e.t0,C=(P=null!=d?d:{}).iframe,L=P.button,S=P.window,T=v(P,["iframe","button","window"]),E=n(g(g(g({},p),T),{},{callbackURL:h,clientId:m,fallbackURL:O,userTrackingId:"sandbox"===_?"development":y,embedded:k})),I="".concat(j,"/#/integracao").concat(E),M=a({domain:j,onEmmiter:function(n){var e,t=n.eventName;["exit","complete"].includes(t)&&(o("windowParent")&&(null===(e=o("windowParent"))||void 0===e||e.close()))}}),R=function(){r("windowParent",window.open(I,"gbConnectWindow","width=".concat((null==S?void 0:S.width)||992,",height=").concat((null==S?void 0:S.height)||820)))},k&&l({config:C,src:I,container:c}),k||u({config:L,container:c,onClick:R}),e.abrupt("return",{on:M.on,openNewWindow:R,events:b,destroy:function(){setTimeout((function(){var n,e,t,o;i(),null===(n=globalThis.document)||void 0===n||null===(e=n.querySelector("[".concat("data-gbc-style-button","]")))||void 0===e||e.remove(),null===(t=globalThis.document)||void 0===t||null===(o=t.querySelector("[".concat("data-guiabolso-connect-embedded","]")))||void 0===o||o.remove(),null==c||c.remove(),M.destroy(),r("isDestroyed",!0)}),2e3)}});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r("isDestroyed",!1),exports.guiabolsoConnect=w,globalThis.guiabolsoConnect=w;